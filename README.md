# Scalebar Adder

顕微鏡で撮影した画像に、簡単にスケールバーを追加できる Web アプリケーションです。  
URL: https://motonum.github.io/MicroscopeImageEditor/

## 概要

このツールは、研究などで使用する顕微鏡画像にスケールバーを付与し、そのまま画像として保存する手間を削減するために開発されました。
ファイル名や解像度から設定を自動で推測する機能や、直感的な UI により、誰でも簡単にスケールバー入りの画像を生成できます。

## 主な機能

- **画像のアップロード**:

  - ドラッグ＆ドロップまたはファイル選択ダイアログで画像を簡単に追加できます。
  - 複数の画像をリストで管理し、切り替えながら編集できます。

- **設定の自動推論**:

  - **倍率の自動入力**: ファイル名に `x100` や `400倍` のような文字列が含まれている場合、その数値を読み取って自動で倍率を設定します。
  - **顕微鏡タイプの自動判別**: 画像の解像度から、お使いの顕微鏡が「正立」か「倒立」かを自動で推測し、適切なスケール計算を適用します。

- **スケールバーのカスタマイズ**:

  - **位置**: ドラッグ＆ドロップで任意の位置に移動できます。
  - **長さ**: µm（マイクロメートル）単位で自由に設定できます。
  - **デザイン**: 色、線の太さ、文字のサイズ・太さを細かく調整できます。
  - **背景**: テキストの視認性を上げるための背景表示をオン/オフできます。

- **擬似カラーリング**:

  - グレースケールの画像に対して、複数のカラーマップを適用し、擬似的に着色することができます。

- **画像の保存**:
  - 設定したスケールバーやカラーリングを画像に焼き付けて、PNG 形式でダウンロードできます。

## 使い方

1.  **画像のアップロード**:
    - 画面のどこかに画像ファイルをドラッグ＆ドロップするか、左上のフォルダアイコンからファイルを選択します。
2.  **画像を選択**:
    - 左側のリストから編集したい画像をクリックします。
3.  **設定の調整**:
    - 右側のパネルで、顕微鏡の倍率やスケールバーの各種設定（長さ、色、太さなど）を調整します。
    - ファイル名などから自動設定された値が正しいか確認し、必要に応じて変更してください。
4.  **スケールバーの位置調整**:
    - 画像上のスケールバーをドラッグして、好きな場所に配置します。
5.  **画像の保存**:
    - 右下の「保存」ボタンをクリックすると、表示されている画像がスケールバー付きでダウンロードされます。

## 使用技術

- **フロントエンド**: React, TypeScript, Vite
- **状態管理**: Jotai
- **UI**: Tailwind CSS, shadcn/ui
- **グラフィック**: Konva.js, react-konva
